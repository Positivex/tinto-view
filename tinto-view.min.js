"use strict";angular.module("Tinto",["ngRoute"]).directive("tintoView",function($route,$compile,$controller){return{restrict:"ECA",terminal:!0,priority:400,transclude:"element",compile:function(element,attr,linker){return function(scope,$element,attr){function cleanupLastView(){currentElement&&(currentElement=null)}function update(){if("undefined"!=typeof $route.current){if(storedElements[$route.current.viewName]&&$route.current.hideOnly){for(attr in storedElements)attr!=$route.current.viewName&&(storedElements[attr].removeClass("ng-show").addClass("ng-hide"),storedElements[attr].scope().$emit("leave"));return storedElements[$route.current.viewName].removeClass("ng-hide").addClass("ng-show"),storedElements[$route.current.viewName].scope().$emit("enter"),currentElement&&!keepPreviousView&&currentElement.remove(),void(keepPreviousView=$route.current.hideOnly)}if("undefined"==typeof storedElements[$route.current.viewName]&&keepPreviousView)for(attr in storedElements)storedElements[attr].removeClass("ng-show").addClass("ng-hide"),storedElements[attr].scope().$emit("leave");var locals=$route.current&&$route.current.locals,template=locals&&locals.$template;if(template){var newScope=scope.$new();linker(newScope,function(clone){clone.html(template),$element.parent().append(clone),currentElement&&($route.current.hideOnly?keepPreviousView||currentElement.remove():keepPreviousView||currentElement.remove());var link=$compile(clone.contents()),current=$route.current;if(cleanupLastView(),currentElement=clone,$route.current.hideOnly&&(storedElements[$route.current.viewName]=clone),current.scope=newScope,current.controller){locals.$scope=newScope;var controller=$controller(current.controller,locals);clone.data("$ngControllerController",controller),clone.children().data("$ngControllerController",controller)}link(newScope),newScope.$emit("$viewContentLoaded"),newScope.$emit("enter")})}else cleanupLastView();"undefined"!=typeof $route.current&&(keepPreviousView=$route.current.hideOnly)}}var currentElement,keepPreviousView,storedElements={};scope.$on("$routeChangeSuccess",update),update()}}}});